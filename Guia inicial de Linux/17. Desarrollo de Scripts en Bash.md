
---
- TAG: #Creación #Scripts #Bash #Colours #Filtrado
----
El scripting en bash es como si estuviesemos ejecutando una serie de comandos desde consola pero en un script trasladado

Nos dirigimos a nuestra carpeta preferida y creamos un archivo `.sh` el cual le agregaremos el siguiente script:

- Al Crearlo hay que otorgarle permisos de ejecución 

```bash
chmod +x script.sh
```

Esto le otorgara permisos de ejecución para todos los grupos 

Script:
```bash
#!/usr/bin/bash

echo "Esto es una prueba"
```

Ahora veremos otro ejemplo:

Para esto primero debemos conseguir la información que deseamos filtrar, por ejemplo ver solo nuestra interfaz al ejecutar el siguiente comando:

```bash
ip a
```

Veremos toda la información, pero para ver solo nuestra interfaz:

```bash
ip a | grep eth0
```

Pero si quieres filtrar por una línea en específico lo puedes hacer de la siguiente manera:

```bash
ip a | grep eth0 | tail -n 1
```

Ahora tenemos solo la linea con la información de la ip y podemos filtrar por argumentos o palabras desde la izquierda, como la ip esta en el segundo argumento lo filtramos de la siguiente manera:

```bash
ip a | grep eth0 | tail -n 1 | awk '{print $2}'
```

Veremos la dirección ip seguida de `/24` y si la queremos eliminar para ver solo la ip tenemos que hacer un 

```bash
ip a | grep eth0 | tail -n 1 | awk '{print $2}' | awk '{print $1}' FS="/"
```

Esto indica que quiere quedarse con el primer argumento, tomando como delimitador la `/` 

Tambien tenemos la herramienta `cut` para poder filtar de la misma manera 

```bash
ip a | grep eth0 | tail -n 1 | awk '{print $2}' | cut -d '/' -f 1
```

Otra forma es con `tr`, le convertimos en dos argumentos separandolos y luego eliminandolo

```bash
ip a | grep eth0 | tail -n 1 | awk '{print $2}' | tr '/' ' '
ip a | grep eth0 | tail -n 1 | awk '{print $2}' | tr '/' ' ' | awk '{print $1}'
```


Ahora con todo esto explicado, escogemos la función que nos da solo la dirección ip:

```bash
ip a | grep eth0 | tail -n 1 | awk '{print $2}' | awk '{print $1}' FS="/"
```

Ahora en el script que hemos creado, haremos que muestre un mensaje indicando la dirección ip:

```bash
#!/usr/bin/bash

echo "[+] Esta es tu dirección IP privada -> $(ip a | grep eth0 | tail -n 1 | awk '{print $2}' | awk '{print $1}' FS="/")"
```

Es de buenas practicas utilzar un salto de linea para que sea un poco separa y mejor esteticamente

el parametro `-e` nos permite leer caracteres especiales como `\n`

```bash
#!/usr/bin/bash

echo -e "\n[+] Esta es tu dirección IP privada -> $(ip a | grep eth0 | tail -n 1 | awk '{print $2}' | awk '{print $1}' FS="/")\n"
```

`-e` tambien suele servir para otras cosas, como agregar variables que nos permitan agregarle mejor estetica con colores con la sisguientes variables: 

```bash
#!/bin/bash
#Colours
greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"
```

estas variables contienen caractares especiales que el comando `-e` nos permita entenderlos y ejecutarlos en la linea que queramos como a continuación:


```bash
#!/bin/bash
#Colours
greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"

echo -e "\n${yellowColour}[+]${endColour} ${blueColour}Esta es tu dirección IP privada -> ${endColour}${redColour}$(ip a | grep eth0 | tail -n 1 | awk '{print $2}' | awk '{print $1}' FS="/")\n"${endColour}
```

Recuerden siempre cerrar hasta donde quieres que se vea ese color

